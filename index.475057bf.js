var e=class{constructor(e,t,i,h){this.x=t,this.y=i,this.c=e,this.width=h,this.height=h,this.dx=h,this.dy=h,this.draw()}draw(){this.c.fillRect(this.x,this.y,this.width,this.height),this.c.strokeRect(this.x,this.y,this.width,this.height)}die(){this.c.clearRect(this.x,this.y,this.width,this.height)}shouldDie(e){const t=this.getNumberOfNeighbours(e);return t<2||t>3}getNumberOfNeighbours(e){let t=0;return e.forEach((e=>{(e.x===this.x-this.width&&e.y===this.y-this.height||e.x===this.x-this.width&&e.y===this.y||e.x===this.x-this.width&&e.y===this.y+this.height||e.x===this.x&&e.y===this.y-this.height||e.x===this.x&&e.y===this.y+this.height||e.x===this.x+this.width&&e.y===this.y-this.height||e.x===this.x+this.width&&e.y===this.y||e.x===this.x+this.width&&e.y===this.y+this.height)&&t++})),t}};const t=document.querySelector("canvas").getContext("2d");var i=class{constructor(e,t){this.deadCellsIndexes=[],this.newBornCells=[],this.generationCounter=1,this.aliveCells=e,this.cellSideLength=t}nextGeneration(){for(let e=0;e<window.innerWidth;e+=this.cellSideLength)for(let t=0;t<window.innerHeight;t+=this.cellSideLength){const i=this.findCellAt(e,t);i?this.handleAliveCell(i):this.handleDeadCellAt(e,t)}this.cleanDeadCells(),this.aliveCells=[...this.aliveCells,...this.newBornCells],this.newBornCells=[],this.deadCellsIndexes=[],this.generationCounter++}findCellAt(e,t){return this.aliveCells.find((i=>i.x===e&&i.y===t))}handleDeadCellAt(i,h){this.shouldBecomeAliveCellAt(i,h)&&this.newBornCells.push(new e(t,i,h,this.cellSideLength))}shouldBecomeAliveCellAt(e,t){let i=0;return this.aliveCells.forEach((h=>{(h.x===e-this.cellSideLength&&h.y===t-this.cellSideLength||h.x===e-this.cellSideLength&&h.y===t||h.x===e-this.cellSideLength&&h.y===t+this.cellSideLength||h.x===e&&h.y===t-this.cellSideLength||h.x===e&&h.y===t+this.cellSideLength||h.x===e+this.cellSideLength&&h.y===t-this.cellSideLength||h.x===e+this.cellSideLength&&h.y===t||h.x===e+this.cellSideLength&&h.y===t+this.cellSideLength)&&i++})),3===i}handleAliveCell(e){if(e.shouldDie(this.aliveCells)){e.die();const t=this.aliveCells.findIndex((t=>t.x===e.x&&t.y===e.y));this.deadCellsIndexes.push(t)}}cleanDeadCells(){this.deadCellsIndexes.sort(((e,t)=>e-t));for(let e=this.deadCellsIndexes.length-1;e>=0;e--)this.aliveCells.splice(this.deadCellsIndexes[e],1)}};function h(e,t){return t*(Math.ceil(e/t)-1)}let s,l,n=[],d=!1;const c=document.querySelector("canvas"),r=c.getContext("2d");function o(){for(c.height=window.innerHeight,c.width=window.innerWidth,r.strokeStyle="#ccc",r.lineWidth=1;!s;)s=Number(prompt("Enter the cell's side length (in px)"));c.addEventListener("click",(t=>{const i=h(t.clientX,s),l=h(t.clientY,s);d||function(e,t,i){return Boolean(i.find((i=>i.x===e&&i.y===t)))}(i,l,n)||n.push(new e(r,i,l,s))}))}const a={Enter:()=>{d=!0,function(){const e=new i(n,s);let t=1;!function i(){t%5==0&&d&&e.nextGeneration(),t++,l=requestAnimationFrame(i)}()}()},t:()=>{d=!d},r:()=>{d=!1,n=[],cancelAnimationFrame(l),r.clearRect(0,0,c.width,c.height)}};o(),document.addEventListener("keyup",(e=>{a[e.key]()}));
//# sourceMappingURL=index.475057bf.js.map
