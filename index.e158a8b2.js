const t=10;var e=class{constructor(e,i,h){this.width=t,this.height=t,this.dx=this.width,this.dy=this.height,this.x=i,this.y=h,this.c=e,this.draw()}draw(){this.c.fillRect(this.x,this.y,this.width,this.height),this.c.strokeRect(this.x,this.y,this.width,this.height)}die(){this.c.clearRect(this.x,this.y,this.width,this.height)}shouldDie(t){const e=this.getNumberOfNeighbours(t);return e<2||e>3}getNumberOfNeighbours(t){let e=0;return t.forEach((t=>{(t.x===this.x-this.width&&t.y===this.y-this.height||t.x===this.x-this.width&&t.y===this.y||t.x===this.x-this.width&&t.y===this.y+this.height||t.x===this.x&&t.y===this.y-this.height||t.x===this.x&&t.y===this.y+this.height||t.x===this.x+this.width&&t.y===this.y-this.height||t.x===this.x+this.width&&t.y===this.y||t.x===this.x+this.width&&t.y===this.y+this.height)&&e++})),e}};const i=document.querySelector("canvas").getContext("2d");var h=class{constructor(t){this.deadCellsIndexes=[],this.newBornCells=[],this.generationCounter=1,this.aliveCells=t}nextGeneration(){for(let e=0;e<window.innerWidth;e+=t)for(let i=0;i<window.innerHeight;i+=t){const t=this.findCellAt(e,i);t?this.handleAliveCell(t):this.handleDeadCellAt(e,i)}this.cleanDeadCells(),this.aliveCells=[...this.aliveCells,...this.newBornCells],this.newBornCells=[],this.deadCellsIndexes=[],this.generationCounter++}findCellAt(t,e){return this.aliveCells.find((i=>i.x===t&&i.y===e))}handleDeadCellAt(t,h){this.shouldBecomeAliveCellAt(t,h)&&this.newBornCells.push(new e(i,t,h))}shouldBecomeAliveCellAt(e,i){let h=0;return this.aliveCells.forEach((s=>{(s.x===e-t&&s.y===i-t||s.x===e-t&&s.y===i||s.x===e-t&&s.y===i+t||s.x===e&&s.y===i-t||s.x===e&&s.y===i+t||s.x===e+t&&s.y===i-t||s.x===e+t&&s.y===i||s.x===e+t&&s.y===i+t)&&h++})),3===h}handleAliveCell(t){if(t.shouldDie(this.aliveCells)){t.die();const e=this.aliveCells.findIndex((e=>e.x===t.x&&e.y===t.y));this.deadCellsIndexes.push(e)}}cleanDeadCells(){this.deadCellsIndexes.sort(((t,e)=>t-e));for(let t=this.deadCellsIndexes.length-1;t>=0;t--)this.aliveCells.splice(this.deadCellsIndexes[t],1)}};function s(e){return t*(Math.ceil(e/t)-1)}let l,n=[],d=!1;const r=document.querySelector("canvas"),o=r.getContext("2d");function c(){document.addEventListener("keyup",(t=>{"Enter"===t.key&&(d=!0,function(){const t=new h(n);let e=1;!function i(){e%5==0&&d&&t.nextGeneration(),e++,l=requestAnimationFrame(i)}()}()),"t"===t.key&&(d=!d),"r"===t.key&&(d=!1,n=[],cancelAnimationFrame(l),o.clearRect(0,0,r.width,r.height))}))}r.height=window.innerHeight,r.width=window.innerWidth,o.strokeStyle="#ccc",o.lineWidth=1,r.addEventListener("click",(t=>{d||n.push(new e(o,s(t.clientX),s(t.clientY)))})),c();
//# sourceMappingURL=index.e158a8b2.js.map
